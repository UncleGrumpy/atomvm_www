<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libAtomVM: /home/runner/work/AtomVM/AtomVM/src/libAtomVM/memory.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="AVM-alt.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libAtomVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_71a31c0df5161b11b9c2da40f7f3343f.html">libAtomVM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">memory.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="term__typedef_8h_source.html">term_typedef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utils_8h_source.html">utils.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for memory.h:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8h__incl.png" border="0" usemap="#a_2home_2runner_2work_2_atom_v_m_2_atom_v_m_2src_2lib_atom_v_m_2memory_8h" alt=""/></div>
<map name="a_2home_2runner_2work_2_atom_v_m_2_atom_v_m_2src_2lib_atom_v_m_2memory_8h" id="a_2home_2runner_2work_2_atom_v_m_2_atom_v_m_2src_2lib_atom_v_m_2memory_8h">
<area shape="rect" title=" " alt="" coords="119,5,370,47"/>
<area shape="rect" href="term__typedef_8h.html" title="term type definition" alt="" coords="84,95,205,121"/>
<area shape="rect" title=" " alt="" coords="211,169,281,196"/>
<area shape="rect" href="utils_8h.html" title="Misc functions and macros." alt="" coords="283,95,345,121"/>
<area shape="rect" title=" " alt="" coords="5,169,76,196"/>
<area shape="rect" title=" " alt="" coords="100,169,187,196"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8h__dep__incl.png" border="0" usemap="#a_2home_2runner_2work_2_atom_v_m_2_atom_v_m_2src_2lib_atom_v_m_2memory_8hdep" alt=""/></div>
<map name="a_2home_2runner_2work_2_atom_v_m_2_atom_v_m_2src_2lib_atom_v_m_2memory_8hdep" id="a_2home_2runner_2work_2_atom_v_m_2_atom_v_m_2src_2lib_atom_v_m_2memory_8hdep">
<area shape="rect" title=" " alt="" coords="324,5,575,47"/>
<area shape="rect" href="ccontext_8h.html" title="C context functions." alt="" coords="5512,377,5765,419"/>
<area shape="rect" href="mailbox_8c.html" title=" " alt="" coords="1035,571,1285,612"/>
<area shape="rect" href="memory_8c.html" title=" " alt="" coords="378,474,627,515"/>
<area shape="rect" href="refc__binary_8c.html" title=" " alt="" coords="93,467,304,523"/>
<area shape="rect" href="term_8h.html" title="term manipulation functions" alt="" coords="2670,95,2898,136"/>
<area shape="rect" href="bitstring_8h.html" title=" " alt="" coords="1007,191,1257,233"/>
<area shape="rect" href="context_8h.html" title="Context struct and related management functions." alt="" coords="2933,288,3179,329"/>
<area shape="rect" href="nifs_8c.html" title=" " alt="" coords="2983,571,3203,612"/>
<area shape="rect" href="interop_8h.html" title=" " alt="" coords="2341,377,2584,419"/>
<area shape="rect" href="term_8c.html" title=" " alt="" coords="1309,474,1536,515"/>
<area shape="rect" href="mailbox_8h.html" title="Mailbox management functions such as send and receive functions." alt="" coords="1035,474,1285,515"/>
<area shape="rect" href="stacktrace_8h.html" title=" " alt="" coords="3667,474,3933,515"/>
<area shape="rect" href="port_8h.html" title=" " alt="" coords="4962,474,5185,515"/>
<area shape="rect" href="dictionary_8c.html" title=" " alt="" coords="701,474,960,515"/>
<area shape="rect" href="dictionary_8h.html" title=" " alt="" coords="537,377,797,419"/>
<area shape="rect" href="exportedfunction_8h.html" title="Module exported functions structs and macros." alt="" coords="2659,377,2967,419"/>
<area shape="rect" href="externalterm_8h.html" title="External term deserialization functions." alt="" coords="4952,288,5235,329"/>
<area shape="rect" href="globalcontext_8h.html" title="GlobalContext struct and related management functions." alt="" coords="3854,191,4141,233"/>
<area shape="rect" href="overflow__helpers_8h.html" title=" " alt="" coords="4302,184,4543,240"/>
<area shape="rect" href="bitstring_8c.html" title=" " alt="" coords="871,288,1121,329"/>
<area shape="rect" href="opcodesswitch_8h.html" title=" " alt="" coords="2069,571,2363,612"/>
<area shape="rect" href="context_8c.html" title=" " alt="" coords="541,660,787,701"/>
<area shape="rect" href="module_8c.html" title=" " alt="" coords="3209,660,3455,701"/>
<area shape="rect" href="bif_8h.html" title="BIF private functions." alt="" coords="3061,474,3275,515"/>
<area shape="rect" href="debug_8h.html" title="Debug functions and macros." alt="" coords="1609,377,1847,419"/>
<area shape="rect" href="externalterm_8c.html" title=" " alt="" coords="4953,377,5234,419"/>
<area shape="rect" href="globalcontext_8c.html" title=" " alt="" coords="5051,571,5336,612"/>
<area shape="rect" href="port_8c.html" title=" " alt="" coords="4805,571,5027,612"/>
<area shape="rect" href="module_8h.html" title="Module loading functions." alt="" coords="3189,377,3435,419"/>
<area shape="rect" href="nifs_8h.html" title="Private NIFs." alt="" coords="2304,474,2525,515"/>
<area shape="rect" href="scheduler_8h.html" title="Scheduling functions." alt="" coords="1920,474,2179,515"/>
<area shape="rect" href="bif_8c.html" title=" " alt="" coords="3837,571,4049,612"/>
<area shape="rect" href="debug_8c.html" title=" " alt="" coords="1610,474,1846,515"/>
<area shape="rect" href="scheduler_8c.html" title=" " alt="" coords="2387,571,2645,612"/>
<area shape="rect" href="interop_8c.html" title=" " alt="" coords="3400,474,3643,515"/>
<area shape="rect" href="platform__nifs_8h.html" title=" " alt="" coords="2702,474,2986,515"/>
<area shape="rect" href="sys_8h.html" title="Platform specific functions." alt="" coords="4008,474,4227,515"/>
<area shape="rect" href="stacktrace_8c.html" title=" " alt="" coords="4089,571,4353,612"/>
<area shape="rect" href="defaultatoms_8h.html" title=" " alt="" coords="4403,377,4687,419"/>
<area shape="rect" href="defaultatoms_8c.html" title=" " alt="" coords="4504,474,4787,515"/>
</map>
</div>
</div>
<p><a href="memory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6e19e7344fa8c340e30976838118f837"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a6e19e7344fa8c340e30976838118f837">HEAP_NEED_GC_SHRINK_THRESHOLD_COEFF</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a6e19e7344fa8c340e30976838118f837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb2934a78e531d44de65870ae822e8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#acdb2934a78e531d44de65870ae822e8a">MIN_FREE_SPACE_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:acdb2934a78e531d44de65870ae822e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00cc9554ecc1111be8ff0734d298498"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#aa00cc9554ecc1111be8ff0734d298498">TYPEDEF_CONTEXT</a></td></tr>
<tr class="separator:aa00cc9554ecc1111be8ff0734d298498"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7925e3baf84a3c60ae7f4ac180c2fd85"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_context.html">Context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a7925e3baf84a3c60ae7f4ac180c2fd85">Context</a></td></tr>
<tr class="separator:a7925e3baf84a3c60ae7f4ac180c2fd85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3d8bef9f86e567a8516760e56fdf085c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085c">MemoryGCResult</a> { <a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a">MEMORY_GC_OK</a> = 0
, <a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca51b59d5108a68a8b43146d0ffc508daa">MEMORY_GC_ERROR_FAILED_ALLOCATION</a> = 1
, <a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca8fdda43fabb9c2f2b1dbb948c59bf52d">MEMORY_GC_DENIED_ALLOCATION</a> = 2
 }</td></tr>
<tr class="separator:a3d8bef9f86e567a8516760e56fdf085c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9af0045c6769f6c6a58128a9e85167"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167">MemoryShrinkMode</a> { <a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167a4f22a4c14101be7b3fe4fa54adcadd1c">MEMORY_NO_SHRINK</a> = 0
, <a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167a60f35c55b5fa2d4850516dcbd5a63427">MEMORY_CAN_SHRINK</a> = 1
, <a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167a9205a5d2be2260c281bf467b6c45936f">MEMORY_FORCE_SHRINK</a> = 2
 }</td></tr>
<tr class="separator:a4d9af0045c6769f6c6a58128a9e85167"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac170e85f146454d7e60e4cfb07f5d248"><td class="memItemLeft" align="right" valign="top"><a class="el" href="utils_8h.html#ae07b0372c8d590e497c27a4ebf893e9b">MALLOC_LIKE</a> <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#ac170e85f146454d7e60e4cfb07f5d248">memory_heap_alloc</a> (<a class="el" href="struct_context.html">Context</a> *ctx, size_t size)</td></tr>
<tr class="memdesc:ac170e85f146454d7e60e4cfb07f5d248"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocates space for a certain amount of terms on the heap  <a href="memory_8h.html#ac170e85f146454d7e60e4cfb07f5d248">More...</a><br /></td></tr>
<tr class="separator:ac170e85f146454d7e60e4cfb07f5d248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe87a1712a53525ea0c3d3a20d12a654"><td class="memItemLeft" align="right" valign="top"><a class="el" href="utils_8h.html#ae07b0372c8d590e497c27a4ebf893e9b">MALLOC_LIKE</a> <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#abe87a1712a53525ea0c3d3a20d12a654">memory_alloc_heap_fragment</a> (<a class="el" href="struct_context.html">Context</a> *ctx, size_t size)</td></tr>
<tr class="separator:abe87a1712a53525ea0c3d3a20d12a654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfe36edbe2cd4f03509860d3c82f26a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a7dfe36edbe2cd4f03509860d3c82f26a">memory_copy_term_tree</a> (<a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> **new_heap, <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> t, <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *mso_list)</td></tr>
<tr class="memdesc:a7dfe36edbe2cd4f03509860d3c82f26a"><td class="mdescLeft">&#160;</td><td class="mdescRight">copies a term to a destination heap  <a href="memory_8h.html#a7dfe36edbe2cd4f03509860d3c82f26a">More...</a><br /></td></tr>
<tr class="separator:a7dfe36edbe2cd4f03509860d3c82f26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a797189e9bd307b1e9d118d7358f3622b"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085c">MemoryGCResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a797189e9bd307b1e9d118d7358f3622b">memory_ensure_free_with_roots</a> (<a class="el" href="struct_context.html">Context</a> *ctx, size_t size, size_t num_roots, <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *roots, enum <a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167">MemoryShrinkMode</a> shrink_mode) <a class="el" href="utils_8h.html#ab0cf3933150f135c72968579037f7ae8">MUST_CHECK</a></td></tr>
<tr class="memdesc:a797189e9bd307b1e9d118d7358f3622b"><td class="mdescLeft">&#160;</td><td class="mdescRight">makes sure that the given context has given free memory.  <a href="memory_8h.html#a797189e9bd307b1e9d118d7358f3622b">More...</a><br /></td></tr>
<tr class="separator:a797189e9bd307b1e9d118d7358f3622b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ce659c9162754c8515fbd1b170fc9e"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#af2ce659c9162754c8515fbd1b170fc9e">memory_estimate_usage</a> (<a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> t)</td></tr>
<tr class="memdesc:af2ce659c9162754c8515fbd1b170fc9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculates term memory usage  <a href="memory_8h.html#af2ce659c9162754c8515fbd1b170fc9e">More...</a><br /></td></tr>
<tr class="separator:af2ce659c9162754c8515fbd1b170fc9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413e8542cd182a4b499e71d5dec3336a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8h.html#a413e8542cd182a4b499e71d5dec3336a">memory_sweep_mso_list</a> (<a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> mso_list)</td></tr>
<tr class="memdesc:a413e8542cd182a4b499e71d5dec3336a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sweep any unreferenced binaries in the "Mark Sweep Object" (MSO) list.  <a href="memory_8h.html#a413e8542cd182a4b499e71d5dec3336a">More...</a><br /></td></tr>
<tr class="separator:a413e8542cd182a4b499e71d5dec3336a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6e19e7344fa8c340e30976838118f837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e19e7344fa8c340e30976838118f837">&#9670;&nbsp;</a></span>HEAP_NEED_GC_SHRINK_THRESHOLD_COEFF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HEAP_NEED_GC_SHRINK_THRESHOLD_COEFF&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8h_source.html#l00033">33</a> of file <a class="el" href="memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="acdb2934a78e531d44de65870ae822e8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb2934a78e531d44de65870ae822e8a">&#9670;&nbsp;</a></span>MIN_FREE_SPACE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_FREE_SPACE_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8h_source.html#l00034">34</a> of file <a class="el" href="memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="aa00cc9554ecc1111be8ff0734d298498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00cc9554ecc1111be8ff0734d298498">&#9670;&nbsp;</a></span>TYPEDEF_CONTEXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TYPEDEF_CONTEXT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8h_source.html#l00037">37</a> of file <a class="el" href="memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a7925e3baf84a3c60ae7f4ac180c2fd85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7925e3baf84a3c60ae7f4ac180c2fd85">&#9670;&nbsp;</a></span>Context</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_context.html">Context</a> <a class="el" href="struct_context.html">Context</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8h_source.html#l00001">1</a> of file <a class="el" href="memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a3d8bef9f86e567a8516760e56fdf085c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d8bef9f86e567a8516760e56fdf085c">&#9670;&nbsp;</a></span>MemoryGCResult</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085c">MemoryGCResult</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a"></a>MEMORY_GC_OK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3d8bef9f86e567a8516760e56fdf085ca51b59d5108a68a8b43146d0ffc508daa"></a>MEMORY_GC_ERROR_FAILED_ALLOCATION&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3d8bef9f86e567a8516760e56fdf085ca8fdda43fabb9c2f2b1dbb948c59bf52d"></a>MEMORY_GC_DENIED_ALLOCATION&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="memory_8h_source.html#l00041">41</a> of file <a class="el" href="memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a4d9af0045c6769f6c6a58128a9e85167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d9af0045c6769f6c6a58128a9e85167">&#9670;&nbsp;</a></span>MemoryShrinkMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167">MemoryShrinkMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4d9af0045c6769f6c6a58128a9e85167a4f22a4c14101be7b3fe4fa54adcadd1c"></a>MEMORY_NO_SHRINK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d9af0045c6769f6c6a58128a9e85167a60f35c55b5fa2d4850516dcbd5a63427"></a>MEMORY_CAN_SHRINK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4d9af0045c6769f6c6a58128a9e85167a9205a5d2be2260c281bf467b6c45936f"></a>MEMORY_FORCE_SHRINK&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="memory_8h_source.html#l00048">48</a> of file <a class="el" href="memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abe87a1712a53525ea0c3d3a20d12a654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe87a1712a53525ea0c3d3a20d12a654">&#9670;&nbsp;</a></span>memory_alloc_heap_fragment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="utils_8h.html#ae07b0372c8d590e497c27a4ebf893e9b">MALLOC_LIKE</a> <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>* memory_alloc_heap_fragment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00050">50</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
<a id="a7dfe36edbe2cd4f03509860d3c82f26a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfe36edbe2cd4f03509860d3c82f26a">&#9670;&nbsp;</a></span>memory_copy_term_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> memory_copy_term_tree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> **&#160;</td>
          <td class="paramname"><em>new_heap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *&#160;</td>
          <td class="paramname"><em>mso_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>copies a term to a destination heap </p>
<p>deep copies a term to a destination heap, once finished old memory can be freed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_heap</td><td>the destination heap where terms will be copied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new term that is stored on the new heap. </dd></dl>

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00199">199</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
<a id="a797189e9bd307b1e9d118d7358f3622b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a797189e9bd307b1e9d118d7358f3622b">&#9670;&nbsp;</a></span>memory_ensure_free_with_roots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085c">MemoryGCResult</a> memory_ensure_free_with_roots </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_roots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *&#160;</td>
          <td class="paramname"><em>roots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="memory_8h.html#a4d9af0045c6769f6c6a58128a9e85167">MemoryShrinkMode</a>&#160;</td>
          <td class="paramname"><em>shrink_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>makes sure that the given context has given free memory. </p>
<p>this function makes sure at least size terms are available. Optionally, it can shrink the heap to the specified size, depending on allocation strategy. The function can also be passed roots to update during any garbage collection. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the target context. </td></tr>
    <tr><td class="paramname">size</td><td>needed available memory. </td></tr>
    <tr><td class="paramname">num_roots</td><td>number of roots </td></tr>
    <tr><td class="paramname">roots</td><td>roots to preserve </td></tr>
    <tr><td class="paramname">shrink_mode</td><td>whether the function can or should shrink </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00050">50</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
<a id="af2ce659c9162754c8515fbd1b170fc9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ce659c9162754c8515fbd1b170fc9e">&#9670;&nbsp;</a></span>memory_estimate_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long memory_estimate_usage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculates term memory usage </p>
<p>perform an used memory calculation using given term as root, shared memory (that is not part of the memory block) is not accounted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>root term on which used memory calculation will be performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>used memory terms count in term units output parameter. </dd></dl>

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00219">219</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
<a id="ac170e85f146454d7e60e4cfb07f5d248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac170e85f146454d7e60e4cfb07f5d248">&#9670;&nbsp;</a></span>memory_heap_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="utils_8h.html#ae07b0372c8d590e497c27a4ebf893e9b">MALLOC_LIKE</a> <a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>* memory_heap_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_context.html">Context</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocates space for a certain amount of terms on the heap </p>
<p>allocates space for a certain amount of terms on the heap, GC will be performed when needed, any existing term might be invalid after this call. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>the context that owns the heap. </td></tr>
    <tr><td class="paramname">size</td><td>the amount of terms that will be allocated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the newly allocated memory block. </dd></dl>

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00042">42</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
<a id="a413e8542cd182a4b499e71d5dec3336a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413e8542cd182a4b499e71d5dec3336a">&#9670;&nbsp;</a></span>memory_sweep_mso_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memory_sweep_mso_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>&#160;</td>
          <td class="paramname"><em>mso_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sweep any unreferenced binaries in the "Mark Sweep Object" (MSO) list. </p>
<p>The MSO list is a list of term (references) in a heap. Currently, the elements of this list are referenced to reference-counted binaries or match binaries that themselves reference reference counted binaries. This function will iterate over the binaries in this list, and decrement the reference count of any elements that have not been marked for move (e.g., into a new heap). If the reference count reaches 0, then memory associated with the referenced binary will be freed.In a typical GC event, the terms in this list are within in the old heap or potentially in a heap fragment. However, this function may be called in a copy even, such as in a process spawn, or in the copy of a term to or from a process mailbox. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mso_list</td><td>the list of mark-sweep object in a heap "space" </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00531">531</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
