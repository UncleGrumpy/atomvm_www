<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libAtomVM: /home/runner/work/AtomVM/AtomVM/src/libAtomVM/context.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="AVM-alt.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libAtomVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_71a31c0df5161b11b9c2da40f7f3343f.html">libAtomVM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">context.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="context_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file is part of AtomVM.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright 2017 Davide Bettio &lt;davide@uninstall.it&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *    http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * limitations under the License.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * SPDX-License-Identifier: Apache-2.0 OR LGPL-2.1-or-later</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="context_8h.html">context.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;fenv.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dictionary_8h.html">dictionary.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="erl__nif_8h.html">erl_nif.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="erl__nif__priv_8h.html">erl_nif_priv.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="globalcontext_8h.html">globalcontext.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="list_8h.html">list.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mailbox_8h.html">mailbox.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="smp_8h.html">smp.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="synclist_8h.html">synclist.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sys_8h.html">sys.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="context_8c.html#a2a198a3d84a7065c94e7892ceb75c80d">   36</a></span>&#160;<span class="preprocessor">#define IMPL_EXECUTE_LOOP</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opcodesswitch_8h.html">opcodesswitch.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#undef IMPL_EXECUTE_LOOP</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="context_8c.html#a87dcbc4991a2a2fc4eb6fc6a24449f26">   40</a></span>&#160;<span class="preprocessor">#define DEFAULT_STACK_SIZE 8</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="context_8c.html#a37832d7f6075bff04eadfbe74c01d90b">   41</a></span>&#160;<span class="preprocessor">#define BYTES_PER_TERM (TERM_BITS / 8)</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> context_monitors_handle_terminate(<a class="code" href="struct_context.html">Context</a> *ctx);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="context_8c.html#a5ead3055ac6c4c57a32436c5b48c789b">   45</a></span>&#160;<a class="code" href="struct_context.html">Context</a> *<a class="code" href="context_8c.html#a5ead3055ac6c4c57a32436c5b48c789b">context_new</a>(<a class="code" href="struct_global_context.html">GlobalContext</a> *glb)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="struct_context.html">Context</a> *ctx = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_context.html">Context</a>));</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#a738ec595994440a8d082ecd8bd67c53b">IS_NULL_PTR</a>(ctx)) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Failed to allocate memory: %s:%i.\n&quot;</span>, __FILE__, __LINE__);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#aeae2e25a8e84534d0dba31f08797691a">cp</a> = 0;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(<a class="code" href="memory_8c.html#aa34223a2c1aa426b283afb1e2461414a">memory_init_heap</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>, <a class="code" href="context_8c.html#a87dcbc4991a2a2fc4eb6fc6a24449f26">DEFAULT_STACK_SIZE</a>) != <a class="code" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a">MEMORY_GC_OK</a>)) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;Failed to allocate memory: %s:%i.\n&quot;</span>, __FILE__, __LINE__);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(ctx);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a4c60ad366f8f805cf5ecff919fd6cc31">e</a> = ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>.<a class="code" href="struct_heap.html#a2cc7da3405d24ff958597a3f7f844057">heap_end</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    context_clean_registers(ctx, 0);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#ab94260ad13e4741d0fec0bdd9b9f247a">fr</a> = NULL;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#aa72fc5a718a54be78b4a02607b56ffc9">min_heap_size</a> = 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a9182737457d76114944ac3f53842f38c">max_heap_size</a> = 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#abd494edaadbc46a8bce8c137930e1c5f">has_min_heap_size</a> = 0;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a3e09aad8cd47f67a712d48266ac3c277">has_max_heap_size</a> = 0;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="mailbox_8c.html#a20f29bd869d8f62ba9c3865333d66eaa">mailbox_init</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    list_init(&amp;ctx-&gt;<a class="code" href="struct_context.html#a75e3c80303d13b257e1ea370cb95b1f4">dictionary</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#aa77a5906553bf50e66cc182ec13e80e8">native_handler</a> = NULL;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a5c62d2b89183efe97f521a54ae312ad6">saved_module</a> = NULL;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a7fb0662185bce79f98568f9ffe787f62">saved_ip</a> = NULL;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#ae9942a065674962c131829f2d6498794">restore_trap_handler</a> = NULL;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#ad77850973de5c0039da7cc4dcb00f130">leader</a> = 0;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    timer_list_item_init(&amp;ctx-&gt;<a class="code" href="struct_context.html#a46e035db0faacb8c62dc1dd4284778b4">timer_list_head</a>, 0);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    list_init(&amp;ctx-&gt;<a class="code" href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">monitors_head</a>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#adc2407ac05fe0a57ef7a7eaeb60487fa">trap_exit</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#ifdef ENABLE_ADVANCED_TRACE</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    ctx-&gt;trace_calls = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    ctx-&gt;trace_call_args = 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    ctx-&gt;trace_returns = 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    ctx-&gt;trace_send = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    ctx-&gt;trace_receive = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#aab748d6f6fa18955b7529a051c82b964">flags</a> = <a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da58023b588aa8366442fc981c45b9a1b0">NoFlags</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a7d663b46991eb2b27ef2e2dcfae9323f">platform_data</a> = NULL;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#af1fdf13c2ec4006b6868c3ae722652c0">group_leader</a> = term_from_local_process_id(<a class="code" href="globalcontext_8h.html#a17fd138a326b7a75a0782c49673fd767">INVALID_PROCESS_ID</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a15873cff3f57383a3b8a220ecb00130a">bs</a> = term_invalid_term();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a68e420dbb90bd601833abd8cbc063e03">bs_offset</a> = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">exit_reason</a> = <a class="code" href="defaultatoms_8h.html#ad70279c275dd27c0699b31a9f685d46a">NORMAL_ATOM</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="globalcontext_8c.html#accb1e9d4ee8b1f7181abce67e2e57c61">globalcontext_init_process</a>(glb, ctx);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> ctx;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="context_8c.html#a3865304b56e965f2bd1fe97cb19359fc">  110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="context_8c.html#a3865304b56e965f2bd1fe97cb19359fc">context_destroy</a>(<a class="code" href="struct_context.html">Context</a> *ctx)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// Another process can get an access to our mailbox until this point.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_list_head.html">ListHead</a> *processes_table_list = synclist_wrlock(&amp;ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>-&gt;<a class="code" href="struct_global_context.html#abd1392115cdad4d5963f0b4f90e06eb4">processes_table</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="utils_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a>(processes_table_list);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    list_remove(&amp;ctx-&gt;<a class="code" href="struct_context.html#a164a8e3ca1db4f37e899663e81cc01e8">processes_table_head</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// Ensure process is not registered</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="globalcontext_8c.html#aed1ad48a1390168915e45d544de2a322">globalcontext_maybe_unregister_process_id</a>(ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>, ctx-&gt;<a class="code" href="struct_context.html#ae42a6da3dbc6a8f0cfa9ec35312e32dc">process_id</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// When monitor message is sent, process is no longer in the table</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// and is no longer registered either.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    context_monitors_handle_terminate(ctx);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    synclist_unlock(&amp;ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>-&gt;<a class="code" href="struct_global_context.html#abd1392115cdad4d5963f0b4f90e06eb4">processes_table</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Any other process released our mailbox, so we can clear it.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="mailbox_8c.html#a1063d90aefb0fbb48e723c4b0c0fa2b2">mailbox_destroy</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>, &amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(ctx-&gt;<a class="code" href="struct_context.html#ab94260ad13e4741d0fec0bdd9b9f247a">fr</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    memory_destroy_heap(&amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>, ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="dictionary_8c.html#a08f1d293f1dea75860656eeeb2549902">dictionary_destroy</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#a75e3c80303d13b257e1ea370cb95b1f4">dictionary</a>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="struct_context.html#a46e035db0faacb8c62dc1dd4284778b4">timer_list_head</a>.<a class="code" href="struct_timer_list_item.html#a7b6e853babe0200ef998ba5d85c24b8b">head</a>.<a class="code" href="struct_list_head.html#a2855fe0dde7716a90cd54fae55ceaa54">next</a> != &amp;ctx-&gt;<a class="code" href="struct_context.html#a46e035db0faacb8c62dc1dd4284778b4">timer_list_head</a>.<a class="code" href="struct_timer_list_item.html#a7b6e853babe0200ef998ba5d85c24b8b">head</a>) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="scheduler_8c.html#a5c2d875a46b835c991c15c7da6e61b2c">scheduler_cancel_timeout</a>(ctx);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// Platform data is freed here to allow drivers to use the</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// globalcontext_get_process_lock lock to protect this pointer</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// Typically, another thread or an interrupt would call</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// globalcontext_get_process_lock before accessing platform_data.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// Here, the context can no longer be acquired with</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// globalcontext_get_process_lock, so it&#39;s safe to free the pointer.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="struct_context.html#a7d663b46991eb2b27ef2e2dcfae9323f">platform_data</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(ctx-&gt;<a class="code" href="struct_context.html#a7d663b46991eb2b27ef2e2dcfae9323f">platform_data</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(ctx);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="context_8c.html#abe9d086f741940a2faf5aeaca436a746">  153</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="context_8c.html#abe9d086f741940a2faf5aeaca436a746">context_process_kill_signal</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <span class="keyword">struct</span> <a class="code" href="struct_term_signal.html">TermSignal</a> *signal)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// exit_reason is one of the roots when garbage collecting</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">exit_reason</a> = signal-&gt;<a class="code" href="struct_term_signal.html#ac32e472e073b1826c38259a0c0671c6b">signal_term</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="context_8c.html#ad800f9e1099e43b76beba5a3776c8402">context_update_flags</a>(ctx, ~<a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da58023b588aa8366442fc981c45b9a1b0">NoFlags</a>, <a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da741d60e636de9c1cae81d082f954b0eb">Killed</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="context_8c.html#a8664068d13a362d04bceccc8ca774400">  160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="context_8c.html#a8664068d13a362d04bceccc8ca774400">context_process_process_info_request_signal</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <span class="keyword">struct</span> <a class="code" href="struct_built_in_atom_request_signal.html">BuiltInAtomRequestSignal</a> *signal)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="struct_context.html">Context</a> *target = <a class="code" href="globalcontext_8c.html#a5961836bc63812919b49ce8ec229381e">globalcontext_get_process_lock</a>(ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>, signal-&gt;<a class="code" href="struct_built_in_atom_request_signal.html#ab2d8d0b55f94fcaa5439972ef1e9a00f">sender_pid</a>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (target) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> ret;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="context_8c.html#ae8236f40995af2c7467ff538d1695ce1">context_get_process_info</a>(ctx, &amp;ret, signal-&gt;<a class="code" href="struct_built_in_atom_request_signal.html#a363fb14918738b5d1f5f40e4ddfd05b5">atom</a>)) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="mailbox_8c.html#ab9596ba060bee1c0d961c829dbe2fe90">mailbox_send_term_signal</a>(target, <a class="code" href="mailbox_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a7fcc43fb9b29425d06f0dab64cb769a9">TrapAnswerSignal</a>, ret);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="mailbox_8c.html#a2905d3f98c30c037019557feae7bed3e">mailbox_send_built_in_atom_signal</a>(target, <a class="code" href="mailbox_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aae9cfcde47cf0934b4224e36eef8038a">TrapExceptionSignal</a>, ret);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="globalcontext_8c.html#a776b035cb29bf339cac76c0f620cbe33">globalcontext_get_process_unlock</a>(ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>, target);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    } <span class="comment">// else: sender died</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="context_8c.html#a408711c9f488f4c22fd72175489d9db3">  174</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="context_8c.html#a408711c9f488f4c22fd72175489d9db3">context_process_signal_trap_answer</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <span class="keyword">struct</span> <a class="code" href="struct_term_signal.html">TermSignal</a> *signal)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="context_8c.html#ad800f9e1099e43b76beba5a3776c8402">context_update_flags</a>(ctx, ~<a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da178e499decd0c21272bc34e4b3056eab">Trap</a>, <a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da58023b588aa8366442fc981c45b9a1b0">NoFlags</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a7445d1fd6d7a816a8e4b4b118c476fda">x</a>[0] = signal-&gt;<a class="code" href="struct_term_signal.html#ac32e472e073b1826c38259a0c0671c6b">signal_term</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="context_8c.html#a51ca48be6979ffec53e0b5b6a8a3c63d">  181</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="context_8c.html#a51ca48be6979ffec53e0b5b6a8a3c63d">context_process_flush_monitor_signal</a>(<a class="code" href="struct_context.html">Context</a> *ctx, uint64_t ref_ticks, <span class="keywordtype">bool</span> info)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="context_8c.html#ad800f9e1099e43b76beba5a3776c8402">context_update_flags</a>(ctx, ~<a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da178e499decd0c21272bc34e4b3056eab">Trap</a>, <a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da58023b588aa8366442fc981c45b9a1b0">NoFlags</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="mailbox_8c.html#ae947ce5a1dd6ab96d975fa5289bceecf">mailbox_reset</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> msg;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="mailbox_8c.html#a0b6e2e50f8319a01b6685d03d7ab634b">mailbox_peek</a>(ctx, &amp;msg)) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">if</span> (term_is_tuple(msg)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            &amp;&amp; term_get_tuple_arity(msg) == 5</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            &amp;&amp; term_get_tuple_element(msg, 0) == <a class="code" href="defaultatoms_8h.html#a9421c43be7cfd22e794f9511e4ea7297">DOWN_ATOM</a></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            &amp;&amp; term_is_reference(term_get_tuple_element(msg, 1))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            &amp;&amp; term_to_ref_ticks(term_get_tuple_element(msg, 1)) == ref_ticks) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            mailbox_remove_message(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>, &amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="comment">// If option info is combined with option flush, false is returned if a flush was needed, otherwise true.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            result = !info;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="mailbox_8c.html#a31b908274aa018428af9306d2962b998">mailbox_next</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="mailbox_8c.html#ae947ce5a1dd6ab96d975fa5289bceecf">mailbox_reset</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    ctx-&gt;<a class="code" href="struct_context.html#a7445d1fd6d7a816a8e4b4b118c476fda">x</a>[0] = result ? <a class="code" href="defaultatoms_8h.html#a697a13c6e41b7cefd3e3e4ef25e46479">TRUE_ATOM</a> : <a class="code" href="defaultatoms_8h.html#ae4dd436f6a4239e1ce24965e59688d1f">FALSE_ATOM</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="context_8c.html#ad800f9e1099e43b76beba5a3776c8402">  204</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="context_8c.html#ad800f9e1099e43b76beba5a3776c8402">context_update_flags</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <span class="keywordtype">int</span> mask, <span class="keywordtype">int</span> value) <a class="code" href="smp_8h.html#a4851076fde4a1e631660a5935482d939">CLANG_THREAD_SANITIZE_SAFE</a></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="preprocessor">#ifndef AVM_NO_SMP</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keyword">enum</span> <a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1d">ContextFlags</a> expected = ctx-&gt;flags;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">enum</span> <a class="code" href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1d">ContextFlags</a> desired;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        desired = (expected &amp; mask) | value;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    } <span class="keywordflow">while</span> (!<a class="code" href="smp_8h.html#a8a4878174783ff591b0650af8ebc2b48">ATOMIC_COMPARE_EXCHANGE_WEAK</a>(&amp;ctx-&gt;flags, &amp;expected, desired));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    ctx-&gt;flags = (ctx-&gt;flags &amp; mask) | value;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="context_8c.html#a849dd3bae392a62c531d5929f9acc940">  217</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="context_8c.html#a849dd3bae392a62c531d5929f9acc940">context_message_queue_len</a>(<a class="code" href="struct_context.html">Context</a> *ctx)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mailbox_8c.html#a8b49d31e6f61d1342b24450e7d67c3b5">mailbox_len</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="context_8c.html#a9d013bc537dcc7d9eef2594d7ca2379e">  222</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="context_8c.html#a9d013bc537dcc7d9eef2594d7ca2379e">context_size</a>(<a class="code" href="struct_context.html">Context</a> *ctx)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">size_t</span> messages_size = <a class="code" href="mailbox_8c.html#a19412a6f8824d916d1df4f91f3d85632">mailbox_size</a>(&amp;ctx-&gt;<a class="code" href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">mailbox</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// TODO include ctx-&gt;platform_data</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<a class="code" href="mailbox_8h.html#a7925e3baf84a3c60ae7f4ac180c2fd85">Context</a>)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        + messages_size</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        + memory_heap_memory_size(&amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>) * <a class="code" href="context_8c.html#a37832d7f6075bff04eadfbe74c01d90b">BYTES_PER_TERM</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="context_8c.html#ae8236f40995af2c7467ff538d1695ce1">  232</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="context_8c.html#ae8236f40995af2c7467ff538d1695ce1">context_get_process_info</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> *out, <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> atom_key)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(memory_ensure_free(ctx, 3) != <a class="code" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a">MEMORY_GC_OK</a>)) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        *out = <a class="code" href="defaultatoms_8h.html#a05fa391f29b40e152094bd604dfb1293">OUT_OF_MEMORY_ATOM</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> ret = term_alloc_tuple(2, &amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">switch</span> (atom_key) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// heap_size size in words of the heap of the process</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="defaultatoms_8h.html#acd159300b11c4446847477a3f326347b">HEAP_SIZE_ATOM</a>: {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            term_put_tuple_element(ret, 0, <a class="code" href="defaultatoms_8h.html#acd159300b11c4446847477a3f326347b">HEAP_SIZE_ATOM</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = memory_heap_memory_size(&amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>) - context_stack_size(ctx);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            term_put_tuple_element(ret, 1, term_from_int32(value));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">// stack_size stack size, in words, of the process</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="defaultatoms_8h.html#a37f01258ee09436a2416920437addfe7">STACK_SIZE_ATOM</a>: {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            term_put_tuple_element(ret, 0, <a class="code" href="defaultatoms_8h.html#a37f01258ee09436a2416920437addfe7">STACK_SIZE_ATOM</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = context_stack_size(ctx);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            term_put_tuple_element(ret, 1, term_from_int32(value));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">// message_queue_len number of messages currently in the message queue of the process</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="defaultatoms_8h.html#a7d90c6914d3b7cde9e3ce049e3bedfa4">MESSAGE_QUEUE_LEN_ATOM</a>: {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            term_put_tuple_element(ret, 0, <a class="code" href="defaultatoms_8h.html#a7d90c6914d3b7cde9e3ce049e3bedfa4">MESSAGE_QUEUE_LEN_ATOM</a>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = <a class="code" href="context_8c.html#a849dd3bae392a62c531d5929f9acc940">context_message_queue_len</a>(ctx);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            term_put_tuple_element(ret, 1, term_from_int32(value));</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// memory size in bytes of the process. This includes call stack, heap, and internal structures.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="defaultatoms_8h.html#a1e84ccd6e48f9f92cadc3951f04af942">MEMORY_ATOM</a>: {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            term_put_tuple_element(ret, 0, <a class="code" href="defaultatoms_8h.html#a1e84ccd6e48f9f92cadc3951f04af942">MEMORY_ATOM</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value = <a class="code" href="context_8c.html#a9d013bc537dcc7d9eef2594d7ca2379e">context_size</a>(ctx);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            term_put_tuple_element(ret, 1, term_from_int32(value));</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            *out = <a class="code" href="defaultatoms_8h.html#af18728853e2246cba0937458e40c1a35">BADARG_ATOM</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    *out = ret;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> context_monitors_handle_terminate(<a class="code" href="struct_context.html">Context</a> *ctx)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="struct_global_context.html">GlobalContext</a> *glb = ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_list_head.html">ListHead</a> *item;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_list_head.html">ListHead</a> *tmp;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="list_8h.html#a5f8766dc258711433316453c8c33a2d1">MUTABLE_LIST_FOR_EACH</a> (item, tmp, &amp;ctx-&gt;<a class="code" href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">monitors_head</a>) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keyword">struct </span><a class="code" href="struct_monitor.html">Monitor</a> *monitor = <a class="code" href="list_8h.html#ab76f4b47b7b08b1f93f609fcdb4b6cf6">GET_LIST_ENTRY</a>(item, <span class="keyword">struct</span> <a class="code" href="struct_monitor.html">Monitor</a>, <a class="code" href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">monitor_list_head</a>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span> (monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> &amp;&amp; term_is_boxed(monitor-&gt;<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a>)) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="comment">// Resource monitor</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="keyword">struct </span><a class="code" href="struct_resource_monitor.html">ResourceMonitor</a> *resource_monitor = (<span class="keyword">struct </span><a class="code" href="struct_resource_monitor.html">ResourceMonitor</a> *) monitor;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordtype">void</span> *resource = term_to_term_ptr(monitor-&gt;<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keyword">struct </span><a class="code" href="struct_refc_binary.html">RefcBinary</a> *refc = <a class="code" href="refc__binary_8c.html#aa0af58de2e51890dbfeeb9f1e24d8c09">refc_binary_from_data</a>(resource);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="struct_erl_nif_env.html">ErlNifEnv</a> env;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            erl_nif_env_partial_init_from_globalcontext(&amp;env, glb);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            refc-&gt;<a class="code" href="struct_refc_binary.html#aa1788b61a0f47228d8b8ddf355489db8">resource_type</a>-&gt;<a class="code" href="struct_resource_type.html#ad9945d4dc66584799b66523f5cd885ff">down</a>(&amp;env, resource, &amp;ctx-&gt;<a class="code" href="struct_context.html#ae42a6da3dbc6a8f0cfa9ec35312e32dc">process_id</a>, &amp;monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            list_remove(&amp;resource_monitor-&gt;<a class="code" href="struct_resource_monitor.html#a70629a5f19cf73148fe1d7ba12684564">resource_list_head</a>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordtype">int</span> local_process_id = term_to_local_process_id(monitor-&gt;<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <a class="code" href="struct_context.html">Context</a> *target = <a class="code" href="globalcontext_8c.html#af7ea0d787c69ca653257ee8e1a5e9f3b">globalcontext_get_process_nolock</a>(glb, local_process_id);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#a738ec595994440a8d082ecd8bd67c53b">IS_NULL_PTR</a>(target)) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="comment">// TODO: we should scan for existing monitors when a context is destroyed</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="comment">// otherwise memory might be wasted for long living processes</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(monitor);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span> (monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> == 0 &amp;&amp; (ctx-&gt;<a class="code" href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">exit_reason</a> != <a class="code" href="defaultatoms_8h.html#ad70279c275dd27c0699b31a9f685d46a">NORMAL_ATOM</a> || target-&gt;<a class="code" href="struct_context.html#adc2407ac05fe0a57ef7a7eaeb60487fa">trap_exit</a>)) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordflow">if</span> (target-&gt;<a class="code" href="struct_context.html#adc2407ac05fe0a57ef7a7eaeb60487fa">trap_exit</a>) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(memory_ensure_free(ctx, <a class="code" href="term_8h.html#a476d7e8af59a33c4b1a710660e8edd61">TUPLE_SIZE</a>(3)) != <a class="code" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a">MEMORY_GC_OK</a>)) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        <span class="comment">// TODO: handle out of memory here</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;Cannot handle out of memory.\n&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                        <a class="code" href="globalcontext_8c.html#a776b035cb29bf339cac76c0f620cbe33">globalcontext_get_process_unlock</a>(glb, target);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        <a class="code" href="utils_8h.html#a48e118cd23f648768f0faf4a32d303e6">AVM_ABORT</a>();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    <span class="comment">// Prepare the message on ctx&#39;s heap which will be freed afterwards.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> info_tuple = term_alloc_tuple(3, &amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                    term_put_tuple_element(info_tuple, 0, <a class="code" href="defaultatoms_8h.html#a5b2c2c4cc688436dbceea017dd24ad99">EXIT_ATOM</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    term_put_tuple_element(info_tuple, 1, term_from_local_process_id(ctx-&gt;<a class="code" href="struct_context.html#ae42a6da3dbc6a8f0cfa9ec35312e32dc">process_id</a>));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                    term_put_tuple_element(info_tuple, 2, ctx-&gt;<a class="code" href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">exit_reason</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    <a class="code" href="mailbox_8c.html#a734e82edf48dbe189e8bbfc2205c713d">mailbox_send</a>(target, info_tuple);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    <a class="code" href="mailbox_8c.html#ab9596ba060bee1c0d961c829dbe2fe90">mailbox_send_term_signal</a>(target, <a class="code" href="mailbox_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a3921aa4b0cdc275b5ad7e80ac9fcc4bc">KillSignal</a>, ctx-&gt;<a class="code" href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">exit_reason</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a>) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordtype">int</span> required_terms = <a class="code" href="term_8h.html#afd9d34c95799384d99b83b115f172f96">REF_SIZE</a> + <a class="code" href="term_8h.html#a476d7e8af59a33c4b1a710660e8edd61">TUPLE_SIZE</a>(5);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a>(memory_ensure_free(ctx, required_terms) != <a class="code" href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a">MEMORY_GC_OK</a>)) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    <span class="comment">// TODO: handle out of memory here</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;Cannot handle out of memory.\n&quot;</span>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    <a class="code" href="globalcontext_8c.html#a776b035cb29bf339cac76c0f620cbe33">globalcontext_get_process_unlock</a>(glb, target);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                    <a class="code" href="utils_8h.html#a48e118cd23f648768f0faf4a32d303e6">AVM_ABORT</a>();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="comment">// Prepare the message on ctx&#39;s heap which will be freed afterwards.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> ref = term_from_ref_ticks(monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a>, &amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> info_tuple = term_alloc_tuple(5, &amp;ctx-&gt;<a class="code" href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">heap</a>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                term_put_tuple_element(info_tuple, 0, <a class="code" href="defaultatoms_8h.html#a9421c43be7cfd22e794f9511e4ea7297">DOWN_ATOM</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                term_put_tuple_element(info_tuple, 1, ref);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">if</span> (ctx-&gt;<a class="code" href="struct_context.html#aa77a5906553bf50e66cc182ec13e80e8">native_handler</a> != NULL) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    term_put_tuple_element(info_tuple, 2, <a class="code" href="defaultatoms_8h.html#a2b47ef03800aa973d6808bf8222b5b18">PORT_ATOM</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    term_put_tuple_element(info_tuple, 2, <a class="code" href="defaultatoms_8h.html#aef5be74948b51cc478b37b06779a79c1">PROCESS_ATOM</a>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                term_put_tuple_element(info_tuple, 3, term_from_local_process_id(ctx-&gt;<a class="code" href="struct_context.html#ae42a6da3dbc6a8f0cfa9ec35312e32dc">process_id</a>));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                term_put_tuple_element(info_tuple, 4, ctx-&gt;<a class="code" href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">exit_reason</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                <a class="code" href="mailbox_8c.html#a734e82edf48dbe189e8bbfc2205c713d">mailbox_send</a>(target, info_tuple);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(monitor);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="context_8c.html#a200d25b09a7f96a1fa703a6e24af7ae8">  356</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="context_8c.html#a200d25b09a7f96a1fa703a6e24af7ae8">context_link</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> link_pid)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_monitor.html">Monitor</a> *monitor = malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="struct_monitor.html">Monitor</a>));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#a738ec595994440a8d082ecd8bd67c53b">IS_NULL_PTR</a>(monitor)) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    monitor-&gt;<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a> = link_pid;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> = 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    list_append(&amp;ctx-&gt;<a class="code" href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">monitors_head</a>, &amp;monitor-&gt;<a class="code" href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">monitor_list_head</a>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="context_8c.html#a850b8c7479cc93745b92dc666600ee56">  369</a></span>&#160;uint64_t <a class="code" href="context_8c.html#a850b8c7479cc93745b92dc666600ee56">context_monitor</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> monitor_pid)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    uint64_t <a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> = globalcontext_get_ref_ticks(ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_monitor.html">Monitor</a> *monitor = malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="struct_monitor.html">Monitor</a>));</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#a738ec595994440a8d082ecd8bd67c53b">IS_NULL_PTR</a>(monitor)) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    monitor-&gt;<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a> = monitor_pid;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> = <a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    list_append(&amp;ctx-&gt;<a class="code" href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">monitors_head</a>, &amp;monitor-&gt;<a class="code" href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">monitor_list_head</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="context_8c.html#aa662d96705af3b49e943b009c582f1c3">  384</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_resource_monitor.html">ResourceMonitor</a> *<a class="code" href="context_8c.html#aa662d96705af3b49e943b009c582f1c3">context_resource_monitor</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <span class="keywordtype">void</span> *resource)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;{</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    uint64_t ref_ticks = globalcontext_get_ref_ticks(ctx-&gt;<a class="code" href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">global</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_resource_monitor.html">ResourceMonitor</a> *monitor = malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="struct_resource_monitor.html">ResourceMonitor</a>));</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="utils_8h.html#a738ec595994440a8d082ecd8bd67c53b">IS_NULL_PTR</a>(monitor)) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// Not really boxed, but sufficient to distinguish from pids</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    monitor-&gt;<a class="code" href="struct_resource_monitor.html#a5725fd596cd89f1bc1bd201ce1b62fba">base</a>.<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a> = ((<a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a>) resource) | <a class="code" href="term_8h.html#acce951942a16553f750379e8ff77b6a8">TERM_BOXED_VALUE_TAG</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    monitor-&gt;<a class="code" href="struct_resource_monitor.html#a5725fd596cd89f1bc1bd201ce1b62fba">base</a>.<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> = ref_ticks;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    list_append(&amp;ctx-&gt;<a class="code" href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">monitors_head</a>, &amp;monitor-&gt;<a class="code" href="struct_resource_monitor.html#a5725fd596cd89f1bc1bd201ce1b62fba">base</a>.<a class="code" href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">monitor_list_head</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> monitor;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="context_8c.html#aa6394f95f11a775b89c1a8994e2c8e62">  400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="context_8c.html#aa6394f95f11a775b89c1a8994e2c8e62">context_unlink</a>(<a class="code" href="struct_context.html">Context</a> *ctx, <a class="code" href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a> link_pid)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_list_head.html">ListHead</a> *item;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="list_8h.html#af3e6071cf254285e0628be64a431d988">LIST_FOR_EACH</a> (item, &amp;ctx-&gt;<a class="code" href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">monitors_head</a>) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keyword">struct </span><a class="code" href="struct_monitor.html">Monitor</a> *monitor = <a class="code" href="list_8h.html#ab76f4b47b7b08b1f93f609fcdb4b6cf6">GET_LIST_ENTRY</a>(item, <span class="keyword">struct</span> <a class="code" href="struct_monitor.html">Monitor</a>, <a class="code" href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">monitor_list_head</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span> ((monitor-&gt;<a class="code" href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">monitor_obj</a> == link_pid) &amp;&amp; (monitor-&gt;<a class="code" href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">ref_ticks</a> == 0)) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            list_remove(&amp;monitor-&gt;<a class="code" href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">monitor_list_head</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <a class="code" href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a>(monitor);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="ttc" id="acontext_8c_html_a200d25b09a7f96a1fa703a6e24af7ae8"><div class="ttname"><a href="context_8c.html#a200d25b09a7f96a1fa703a6e24af7ae8">context_link</a></div><div class="ttdeci">int context_link(Context *ctx, term link_pid)</div><div class="ttdoc">Half-link process to another process.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00356">context.c:356</a></div></div>
<div class="ttc" id="acontext_8c_html_a37832d7f6075bff04eadfbe74c01d90b"><div class="ttname"><a href="context_8c.html#a37832d7f6075bff04eadfbe74c01d90b">BYTES_PER_TERM</a></div><div class="ttdeci">#define BYTES_PER_TERM</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00041">context.c:41</a></div></div>
<div class="ttc" id="acontext_8c_html_a3865304b56e965f2bd1fe97cb19359fc"><div class="ttname"><a href="context_8c.html#a3865304b56e965f2bd1fe97cb19359fc">context_destroy</a></div><div class="ttdeci">void context_destroy(Context *ctx)</div><div class="ttdoc">Destroys a context.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00110">context.c:110</a></div></div>
<div class="ttc" id="acontext_8c_html_a408711c9f488f4c22fd72175489d9db3"><div class="ttname"><a href="context_8c.html#a408711c9f488f4c22fd72175489d9db3">context_process_signal_trap_answer</a></div><div class="ttdeci">bool context_process_signal_trap_answer(Context *ctx, struct TermSignal *signal)</div><div class="ttdoc">Process a trap answer signal.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00174">context.c:174</a></div></div>
<div class="ttc" id="acontext_8c_html_a51ca48be6979ffec53e0b5b6a8a3c63d"><div class="ttname"><a href="context_8c.html#a51ca48be6979ffec53e0b5b6a8a3c63d">context_process_flush_monitor_signal</a></div><div class="ttdeci">void context_process_flush_monitor_signal(Context *ctx, uint64_t ref_ticks, bool info)</div><div class="ttdoc">Process a flush monitor signal.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00181">context.c:181</a></div></div>
<div class="ttc" id="acontext_8c_html_a5ead3055ac6c4c57a32436c5b48c789b"><div class="ttname"><a href="context_8c.html#a5ead3055ac6c4c57a32436c5b48c789b">context_new</a></div><div class="ttdeci">Context * context_new(GlobalContext *glb)</div><div class="ttdoc">Creates a new context.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00045">context.c:45</a></div></div>
<div class="ttc" id="acontext_8c_html_a849dd3bae392a62c531d5929f9acc940"><div class="ttname"><a href="context_8c.html#a849dd3bae392a62c531d5929f9acc940">context_message_queue_len</a></div><div class="ttdeci">size_t context_message_queue_len(Context *ctx)</div><div class="ttdoc">Returns number of messages in the process's mailbox.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00217">context.c:217</a></div></div>
<div class="ttc" id="acontext_8c_html_a850b8c7479cc93745b92dc666600ee56"><div class="ttname"><a href="context_8c.html#a850b8c7479cc93745b92dc666600ee56">context_monitor</a></div><div class="ttdeci">uint64_t context_monitor(Context *ctx, term monitor_pid)</div><div class="ttdoc">Create a monitor on a process.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00369">context.c:369</a></div></div>
<div class="ttc" id="acontext_8c_html_a8664068d13a362d04bceccc8ca774400"><div class="ttname"><a href="context_8c.html#a8664068d13a362d04bceccc8ca774400">context_process_process_info_request_signal</a></div><div class="ttdeci">void context_process_process_info_request_signal(Context *ctx, struct BuiltInAtomRequestSignal *signal)</div><div class="ttdoc">Process a process info request signal.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00160">context.c:160</a></div></div>
<div class="ttc" id="acontext_8c_html_a87dcbc4991a2a2fc4eb6fc6a24449f26"><div class="ttname"><a href="context_8c.html#a87dcbc4991a2a2fc4eb6fc6a24449f26">DEFAULT_STACK_SIZE</a></div><div class="ttdeci">#define DEFAULT_STACK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00040">context.c:40</a></div></div>
<div class="ttc" id="acontext_8c_html_a9d013bc537dcc7d9eef2594d7ca2379e"><div class="ttname"><a href="context_8c.html#a9d013bc537dcc7d9eef2594d7ca2379e">context_size</a></div><div class="ttdeci">size_t context_size(Context *ctx)</div><div class="ttdoc">Returns total amount of size (in byes) occupied by the process.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00222">context.c:222</a></div></div>
<div class="ttc" id="acontext_8c_html_aa6394f95f11a775b89c1a8994e2c8e62"><div class="ttname"><a href="context_8c.html#aa6394f95f11a775b89c1a8994e2c8e62">context_unlink</a></div><div class="ttdeci">void context_unlink(Context *ctx, term link_pid)</div><div class="ttdoc">Remove a half-link from a process.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00400">context.c:400</a></div></div>
<div class="ttc" id="acontext_8c_html_aa662d96705af3b49e943b009c582f1c3"><div class="ttname"><a href="context_8c.html#aa662d96705af3b49e943b009c582f1c3">context_resource_monitor</a></div><div class="ttdeci">struct ResourceMonitor * context_resource_monitor(Context *ctx, void *resource)</div><div class="ttdoc">Create a resource monitor on a process.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00384">context.c:384</a></div></div>
<div class="ttc" id="acontext_8c_html_abe9d086f741940a2faf5aeaca436a746"><div class="ttname"><a href="context_8c.html#abe9d086f741940a2faf5aeaca436a746">context_process_kill_signal</a></div><div class="ttdeci">void context_process_kill_signal(Context *ctx, struct TermSignal *signal)</div><div class="ttdoc">Process a kill signal, setting the exit reason and changing the killed flag.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00153">context.c:153</a></div></div>
<div class="ttc" id="acontext_8c_html_ad800f9e1099e43b76beba5a3776c8402"><div class="ttname"><a href="context_8c.html#ad800f9e1099e43b76beba5a3776c8402">context_update_flags</a></div><div class="ttdeci">void context_update_flags(Context *ctx, int mask, int value) CLANG_THREAD_SANITIZE_SAFE</div><div class="ttdoc">Set or clear a flag on another context.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00204">context.c:204</a></div></div>
<div class="ttc" id="acontext_8c_html_ae8236f40995af2c7467ff538d1695ce1"><div class="ttname"><a href="context_8c.html#ae8236f40995af2c7467ff538d1695ce1">context_get_process_info</a></div><div class="ttdeci">bool context_get_process_info(Context *ctx, term *out, term atom_key)</div><div class="ttdoc">Get process information.</div><div class="ttdef"><b>Definition:</b> <a href="context_8c_source.html#l00232">context.c:232</a></div></div>
<div class="ttc" id="acontext_8h_html"><div class="ttname"><a href="context_8h.html">context.h</a></div><div class="ttdoc">Context struct and related management functions.</div></div>
<div class="ttc" id="acontext_8h_html_a5c9a39ccda8c700b8722f9027ef63f1d"><div class="ttname"><a href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1d">ContextFlags</a></div><div class="ttdeci">ContextFlags</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00059">context.h:60</a></div></div>
<div class="ttc" id="acontext_8h_html_a5c9a39ccda8c700b8722f9027ef63f1da178e499decd0c21272bc34e4b3056eab"><div class="ttname"><a href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da178e499decd0c21272bc34e4b3056eab">Trap</a></div><div class="ttdeci">@ Trap</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00067">context.h:67</a></div></div>
<div class="ttc" id="acontext_8h_html_a5c9a39ccda8c700b8722f9027ef63f1da58023b588aa8366442fc981c45b9a1b0"><div class="ttname"><a href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da58023b588aa8366442fc981c45b9a1b0">NoFlags</a></div><div class="ttdeci">@ NoFlags</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00061">context.h:61</a></div></div>
<div class="ttc" id="acontext_8h_html_a5c9a39ccda8c700b8722f9027ef63f1da741d60e636de9c1cae81d082f954b0eb"><div class="ttname"><a href="context_8h.html#a5c9a39ccda8c700b8722f9027ef63f1da741d60e636de9c1cae81d082f954b0eb">Killed</a></div><div class="ttdeci">@ Killed</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00066">context.h:66</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a05fa391f29b40e152094bd604dfb1293"><div class="ttname"><a href="defaultatoms_8h.html#a05fa391f29b40e152094bd604dfb1293">OUT_OF_MEMORY_ATOM</a></div><div class="ttdeci">#define OUT_OF_MEMORY_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00171">defaultatoms.h:171</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a1e84ccd6e48f9f92cadc3951f04af942"><div class="ttname"><a href="defaultatoms_8h.html#a1e84ccd6e48f9f92cadc3951f04af942">MEMORY_ATOM</a></div><div class="ttdeci">#define MEMORY_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00179">defaultatoms.h:179</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a2b47ef03800aa973d6808bf8222b5b18"><div class="ttname"><a href="defaultatoms_8h.html#a2b47ef03800aa973d6808bf8222b5b18">PORT_ATOM</a></div><div class="ttdeci">#define PORT_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00268">defaultatoms.h:268</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a37f01258ee09436a2416920437addfe7"><div class="ttname"><a href="defaultatoms_8h.html#a37f01258ee09436a2416920437addfe7">STACK_SIZE_ATOM</a></div><div class="ttdeci">#define STACK_SIZE_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00182">defaultatoms.h:182</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a5b2c2c4cc688436dbceea017dd24ad99"><div class="ttname"><a href="defaultatoms_8h.html#a5b2c2c4cc688436dbceea017dd24ad99">EXIT_ATOM</a></div><div class="ttdeci">#define EXIT_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00219">defaultatoms.h:219</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a697a13c6e41b7cefd3e3e4ef25e46479"><div class="ttname"><a href="defaultatoms_8h.html#a697a13c6e41b7cefd3e3e4ef25e46479">TRUE_ATOM</a></div><div class="ttdeci">#define TRUE_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00158">defaultatoms.h:158</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a7d90c6914d3b7cde9e3ce049e3bedfa4"><div class="ttname"><a href="defaultatoms_8h.html#a7d90c6914d3b7cde9e3ce049e3bedfa4">MESSAGE_QUEUE_LEN_ATOM</a></div><div class="ttdeci">#define MESSAGE_QUEUE_LEN_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00180">defaultatoms.h:180</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_a9421c43be7cfd22e794f9511e4ea7297"><div class="ttname"><a href="defaultatoms_8h.html#a9421c43be7cfd22e794f9511e4ea7297">DOWN_ATOM</a></div><div class="ttdeci">#define DOWN_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00211">defaultatoms.h:211</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_acd159300b11c4446847477a3f326347b"><div class="ttname"><a href="defaultatoms_8h.html#acd159300b11c4446847477a3f326347b">HEAP_SIZE_ATOM</a></div><div class="ttdeci">#define HEAP_SIZE_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00177">defaultatoms.h:177</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_ad70279c275dd27c0699b31a9f685d46a"><div class="ttname"><a href="defaultatoms_8h.html#ad70279c275dd27c0699b31a9f685d46a">NORMAL_ATOM</a></div><div class="ttdeci">#define NORMAL_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00210">defaultatoms.h:210</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_ae4dd436f6a4239e1ce24965e59688d1f"><div class="ttname"><a href="defaultatoms_8h.html#ae4dd436f6a4239e1ce24965e59688d1f">FALSE_ATOM</a></div><div class="ttdeci">#define FALSE_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00157">defaultatoms.h:157</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_aef5be74948b51cc478b37b06779a79c1"><div class="ttname"><a href="defaultatoms_8h.html#aef5be74948b51cc478b37b06779a79c1">PROCESS_ATOM</a></div><div class="ttdeci">#define PROCESS_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00212">defaultatoms.h:212</a></div></div>
<div class="ttc" id="adefaultatoms_8h_html_af18728853e2246cba0937458e40c1a35"><div class="ttname"><a href="defaultatoms_8h.html#af18728853e2246cba0937458e40c1a35">BADARG_ATOM</a></div><div class="ttdeci">#define BADARG_ATOM</div><div class="ttdef"><b>Definition:</b> <a href="defaultatoms_8h_source.html#l00165">defaultatoms.h:165</a></div></div>
<div class="ttc" id="adictionary_8c_html_a08f1d293f1dea75860656eeeb2549902"><div class="ttname"><a href="dictionary_8c.html#a08f1d293f1dea75860656eeeb2549902">dictionary_destroy</a></div><div class="ttdeci">void dictionary_destroy(struct ListHead *dict)</div><div class="ttdef"><b>Definition:</b> <a href="dictionary_8c_source.html#l00110">dictionary.c:110</a></div></div>
<div class="ttc" id="adictionary_8h_html"><div class="ttname"><a href="dictionary_8h.html">dictionary.h</a></div></div>
<div class="ttc" id="aerl__nif_8h_html"><div class="ttname"><a href="erl__nif_8h.html">erl_nif.h</a></div><div class="ttdoc">Public API for nifs, compatible with Erlang/OTP API.</div></div>
<div class="ttc" id="aerl__nif__priv_8h_html"><div class="ttname"><a href="erl__nif__priv_8h.html">erl_nif_priv.h</a></div></div>
<div class="ttc" id="aglobalcontext_8c_html_a5961836bc63812919b49ce8ec229381e"><div class="ttname"><a href="globalcontext_8c.html#a5961836bc63812919b49ce8ec229381e">globalcontext_get_process_lock</a></div><div class="ttdeci">Context * globalcontext_get_process_lock(GlobalContext *glb, int32_t process_id)</div><div class="ttdoc">Gets a Context from the process table, acquiring a lock on the process table.</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8c_source.html#l00259">globalcontext.c:259</a></div></div>
<div class="ttc" id="aglobalcontext_8c_html_a776b035cb29bf339cac76c0f620cbe33"><div class="ttname"><a href="globalcontext_8c.html#a776b035cb29bf339cac76c0f620cbe33">globalcontext_get_process_unlock</a></div><div class="ttdeci">void globalcontext_get_process_unlock(GlobalContext *glb, Context *c)</div><div class="ttdoc">Unlock the process table after c was gotten.</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8c_source.html#l00277">globalcontext.c:277</a></div></div>
<div class="ttc" id="aglobalcontext_8c_html_accb1e9d4ee8b1f7181abce67e2e57c61"><div class="ttname"><a href="globalcontext_8c.html#accb1e9d4ee8b1f7181abce67e2e57c61">globalcontext_init_process</a></div><div class="ttdeci">void globalcontext_init_process(GlobalContext *glb, Context *ctx)</div><div class="ttdoc">Initialize a new process, providing it with a process id.</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8c_source.html#l00308">globalcontext.c:308</a></div></div>
<div class="ttc" id="aglobalcontext_8c_html_aed1ad48a1390168915e45d544de2a322"><div class="ttname"><a href="globalcontext_8c.html#aed1ad48a1390168915e45d544de2a322">globalcontext_maybe_unregister_process_id</a></div><div class="ttdeci">void globalcontext_maybe_unregister_process_id(GlobalContext *glb, int target_process_id)</div><div class="ttdoc">Remove entry(ies) from registered atoms by process id.</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8c_source.html#l00364">globalcontext.c:364</a></div></div>
<div class="ttc" id="aglobalcontext_8c_html_af7ea0d787c69ca653257ee8e1a5e9f3b"><div class="ttname"><a href="globalcontext_8c.html#af7ea0d787c69ca653257ee8e1a5e9f3b">globalcontext_get_process_nolock</a></div><div class="ttdeci">Context * globalcontext_get_process_nolock(GlobalContext *glb, int32_t process_id)</div><div class="ttdoc">Gets a Context from the process table, without acquiring a lock on the process table.</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8c_source.html#l00242">globalcontext.c:242</a></div></div>
<div class="ttc" id="aglobalcontext_8h_html"><div class="ttname"><a href="globalcontext_8h.html">globalcontext.h</a></div><div class="ttdoc">GlobalContext struct and related management functions.</div></div>
<div class="ttc" id="aglobalcontext_8h_html_a17fd138a326b7a75a0782c49673fd767"><div class="ttname"><a href="globalcontext_8h.html#a17fd138a326b7a75a0782c49673fd767">INVALID_PROCESS_ID</a></div><div class="ttdeci">#define INVALID_PROCESS_ID</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8h_source.html#l00045">globalcontext.h:45</a></div></div>
<div class="ttc" id="alist_8h_html"><div class="ttname"><a href="list_8h.html">list.h</a></div></div>
<div class="ttc" id="alist_8h_html_a5f8766dc258711433316453c8c33a2d1"><div class="ttname"><a href="list_8h.html#a5f8766dc258711433316453c8c33a2d1">MUTABLE_LIST_FOR_EACH</a></div><div class="ttdeci">#define MUTABLE_LIST_FOR_EACH(item, tmp, head)</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00035">list.h:35</a></div></div>
<div class="ttc" id="alist_8h_html_ab76f4b47b7b08b1f93f609fcdb4b6cf6"><div class="ttname"><a href="list_8h.html#ab76f4b47b7b08b1f93f609fcdb4b6cf6">GET_LIST_ENTRY</a></div><div class="ttdeci">#define GET_LIST_ENTRY(list_item, type, list_head_member)</div><div class="ttdoc">gets a pointer to the struct that contains a certain list head</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00029">list.h:29</a></div></div>
<div class="ttc" id="alist_8h_html_af3e6071cf254285e0628be64a431d988"><div class="ttname"><a href="list_8h.html#af3e6071cf254285e0628be64a431d988">LIST_FOR_EACH</a></div><div class="ttdeci">#define LIST_FOR_EACH(item, head)</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00032">list.h:32</a></div></div>
<div class="ttc" id="amailbox_8c_html_a0b6e2e50f8319a01b6685d03d7ab634b"><div class="ttname"><a href="mailbox_8c.html#a0b6e2e50f8319a01b6685d03d7ab634b">mailbox_peek</a></div><div class="ttdeci">bool mailbox_peek(Context *c, term *out)</div><div class="ttdoc">Gets next message from a mailbox (without removing it).</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00354">mailbox.c:354</a></div></div>
<div class="ttc" id="amailbox_8c_html_a1063d90aefb0fbb48e723c4b0c0fa2b2"><div class="ttname"><a href="mailbox_8c.html#a1063d90aefb0fbb48e723c4b0c0fa2b2">mailbox_destroy</a></div><div class="ttdeci">void mailbox_destroy(Mailbox *mbox, Heap *heap)</div><div class="ttdoc">Free memory associated with a mailbox.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00120">mailbox.c:120</a></div></div>
<div class="ttc" id="amailbox_8c_html_a19412a6f8824d916d1df4f91f3d85632"><div class="ttname"><a href="mailbox_8c.html#a19412a6f8824d916d1df4f91f3d85632">mailbox_size</a></div><div class="ttdeci">size_t mailbox_size(Mailbox *mbox)</div><div class="ttdoc">Compute the mailbox size, in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00152">mailbox.c:152</a></div></div>
<div class="ttc" id="amailbox_8c_html_a20f29bd869d8f62ba9c3865333d66eaa"><div class="ttname"><a href="mailbox_8c.html#a20f29bd869d8f62ba9c3865333d66eaa">mailbox_init</a></div><div class="ttdeci">void mailbox_init(Mailbox *mbx)</div><div class="ttdoc">Initialize the mailbox.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00032">mailbox.c:32</a></div></div>
<div class="ttc" id="amailbox_8c_html_a2905d3f98c30c037019557feae7bed3e"><div class="ttname"><a href="mailbox_8c.html#a2905d3f98c30c037019557feae7bed3e">mailbox_send_built_in_atom_signal</a></div><div class="ttdeci">void mailbox_send_built_in_atom_signal(Context *c, enum MessageType type, term atom)</div><div class="ttdoc">Sends a built-in atom signal to a certain mailbox.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00223">mailbox.c:223</a></div></div>
<div class="ttc" id="amailbox_8c_html_a31b908274aa018428af9306d2962b998"><div class="ttname"><a href="mailbox_8c.html#a31b908274aa018428af9306d2962b998">mailbox_next</a></div><div class="ttdeci">void mailbox_next(Mailbox *mbox)</div><div class="ttdoc">Advance pointer to next message in a receive loop.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00340">mailbox.c:340</a></div></div>
<div class="ttc" id="amailbox_8c_html_a734e82edf48dbe189e8bbfc2205c713d"><div class="ttname"><a href="mailbox_8c.html#a734e82edf48dbe189e8bbfc2205c713d">mailbox_send</a></div><div class="ttdeci">void mailbox_send(Context *c, term t)</div><div class="ttdoc">Sends a message to a certain mailbox.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00191">mailbox.c:191</a></div></div>
<div class="ttc" id="amailbox_8c_html_a8b49d31e6f61d1342b24450e7d67c3b5"><div class="ttname"><a href="mailbox_8c.html#a8b49d31e6f61d1342b24450e7d67c3b5">mailbox_len</a></div><div class="ttdeci">size_t mailbox_len(Mailbox *mbox)</div><div class="ttdoc">Compute the mailbox length, in messages.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00136">mailbox.c:136</a></div></div>
<div class="ttc" id="amailbox_8c_html_ab9596ba060bee1c0d961c829dbe2fe90"><div class="ttname"><a href="mailbox_8c.html#ab9596ba060bee1c0d961c829dbe2fe90">mailbox_send_term_signal</a></div><div class="ttdeci">void mailbox_send_term_signal(Context *c, enum MessageType type, term t)</div><div class="ttdoc">Sends a term-based signal to a certain mailbox.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00208">mailbox.c:208</a></div></div>
<div class="ttc" id="amailbox_8c_html_ae947ce5a1dd6ab96d975fa5289bceecf"><div class="ttname"><a href="mailbox_8c.html#ae947ce5a1dd6ab96d975fa5289bceecf">mailbox_reset</a></div><div class="ttdeci">void mailbox_reset(Mailbox *mbox)</div><div class="ttdoc">Reset mailbox receive pointer.</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8c_source.html#l00276">mailbox.c:276</a></div></div>
<div class="ttc" id="amailbox_8h_html"><div class="ttname"><a href="mailbox_8h.html">mailbox.h</a></div><div class="ttdoc">Mailbox management functions such as send and receive functions.</div></div>
<div class="ttc" id="amailbox_8h_html_a7925e3baf84a3c60ae7f4ac180c2fd85"><div class="ttname"><a href="mailbox_8h.html#a7925e3baf84a3c60ae7f4ac180c2fd85">Context</a></div><div class="ttdeci">struct Context Context</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00001">mailbox.h:47</a></div></div>
<div class="ttc" id="amailbox_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a3921aa4b0cdc275b5ad7e80ac9fcc4bc"><div class="ttname"><a href="mailbox_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a3921aa4b0cdc275b5ad7e80ac9fcc4bc">KillSignal</a></div><div class="ttdeci">@ KillSignal</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00063">mailbox.h:63</a></div></div>
<div class="ttc" id="amailbox_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013a7fcc43fb9b29425d06f0dab64cb769a9"><div class="ttname"><a href="mailbox_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013a7fcc43fb9b29425d06f0dab64cb769a9">TrapAnswerSignal</a></div><div class="ttdeci">@ TrapAnswerSignal</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00066">mailbox.h:66</a></div></div>
<div class="ttc" id="amailbox_8h_html_ac6606ebe91c8ac66a2c314c79f5ab013aae9cfcde47cf0934b4224e36eef8038a"><div class="ttname"><a href="mailbox_8h.html#ac6606ebe91c8ac66a2c314c79f5ab013aae9cfcde47cf0934b4224e36eef8038a">TrapExceptionSignal</a></div><div class="ttdeci">@ TrapExceptionSignal</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00067">mailbox.h:67</a></div></div>
<div class="ttc" id="amemory_8c_html_aa34223a2c1aa426b283afb1e2461414a"><div class="ttname"><a href="memory_8c.html#aa34223a2c1aa426b283afb1e2461414a">memory_init_heap</a></div><div class="ttdeci">enum MemoryGCResult memory_init_heap(Heap *heap, size_t size)</div><div class="ttdoc">Initialize a root heap.</div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00043">memory.c:46</a></div></div>
<div class="ttc" id="amemory_8h_html_a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a"><div class="ttname"><a href="memory_8h.html#a3d8bef9f86e567a8516760e56fdf085ca7d6e25e0c92a6286a02975ec516ebc6a">MEMORY_GC_OK</a></div><div class="ttdeci">@ MEMORY_GC_OK</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00055">memory.h:55</a></div></div>
<div class="ttc" id="aopcodesswitch_8h_html"><div class="ttname"><a href="opcodesswitch_8h.html">opcodesswitch.h</a></div></div>
<div class="ttc" id="aopcodesswitch_8h_html_a5aee9ad932d48bce12b2509e623b7da0"><div class="ttname"><a href="opcodesswitch_8h.html#a5aee9ad932d48bce12b2509e623b7da0">free</a></div><div class="ttdeci">free(tmp_atom_name)</div></div>
<div class="ttc" id="arefc__binary_8c_html_aa0af58de2e51890dbfeeb9f1e24d8c09"><div class="ttname"><a href="refc__binary_8c.html#aa0af58de2e51890dbfeeb9f1e24d8c09">refc_binary_from_data</a></div><div class="ttdeci">struct RefcBinary * refc_binary_from_data(void *ptr)</div><div class="ttdoc">get the refc binary from its pointer</div><div class="ttdef"><b>Definition:</b> <a href="refc__binary_8c_source.html#l00056">refc_binary.c:56</a></div></div>
<div class="ttc" id="ascheduler_8c_html_a5c2d875a46b835c991c15c7da6e61b2c"><div class="ttname"><a href="scheduler_8c.html#a5c2d875a46b835c991c15c7da6e61b2c">scheduler_cancel_timeout</a></div><div class="ttdeci">void scheduler_cancel_timeout(Context *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="scheduler_8c_source.html#l00389">scheduler.c:389</a></div></div>
<div class="ttc" id="asmp_8h_html"><div class="ttname"><a href="smp_8h.html">smp.h</a></div><div class="ttdoc">Multicore support functions.</div></div>
<div class="ttc" id="asmp_8h_html_a4851076fde4a1e631660a5935482d939"><div class="ttname"><a href="smp_8h.html#a4851076fde4a1e631660a5935482d939">CLANG_THREAD_SANITIZE_SAFE</a></div><div class="ttdeci">#define CLANG_THREAD_SANITIZE_SAFE</div><div class="ttdef"><b>Definition:</b> <a href="smp_8h_source.html#l00042">smp.h:42</a></div></div>
<div class="ttc" id="asmp_8h_html_a8a4878174783ff591b0650af8ebc2b48"><div class="ttname"><a href="smp_8h.html#a8a4878174783ff591b0650af8ebc2b48">ATOMIC_COMPARE_EXCHANGE_WEAK</a></div><div class="ttdeci">#define ATOMIC_COMPARE_EXCHANGE_WEAK</div><div class="ttdef"><b>Definition:</b> <a href="smp_8h_source.html#l00054">smp.h:54</a></div></div>
<div class="ttc" id="astruct_built_in_atom_request_signal_html"><div class="ttname"><a href="struct_built_in_atom_request_signal.html">BuiltInAtomRequestSignal</a></div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00108">mailbox.h:109</a></div></div>
<div class="ttc" id="astruct_built_in_atom_request_signal_html_a363fb14918738b5d1f5f40e4ddfd05b5"><div class="ttname"><a href="struct_built_in_atom_request_signal.html#a363fb14918738b5d1f5f40e4ddfd05b5">BuiltInAtomRequestSignal::atom</a></div><div class="ttdeci">term atom</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00113">mailbox.h:113</a></div></div>
<div class="ttc" id="astruct_built_in_atom_request_signal_html_ab2d8d0b55f94fcaa5439972ef1e9a00f"><div class="ttname"><a href="struct_built_in_atom_request_signal.html#ab2d8d0b55f94fcaa5439972ef1e9a00f">BuiltInAtomRequestSignal::sender_pid</a></div><div class="ttdeci">int32_t sender_pid</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00112">mailbox.h:112</a></div></div>
<div class="ttc" id="astruct_context_html"><div class="ttname"><a href="struct_context.html">Context</a></div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00074">context.h:75</a></div></div>
<div class="ttc" id="astruct_context_html_a0686e56e3c983101aa2c30ce64874600"><div class="ttname"><a href="struct_context.html#a0686e56e3c983101aa2c30ce64874600">Context::global</a></div><div class="ttdeci">GlobalContext * global</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00077">context.h:77</a></div></div>
<div class="ttc" id="astruct_context_html_a15873cff3f57383a3b8a220ecb00130a"><div class="ttname"><a href="struct_context.html#a15873cff3f57383a3b8a220ecb00130a">Context::bs</a></div><div class="ttdeci">term bs</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00132">context.h:132</a></div></div>
<div class="ttc" id="astruct_context_html_a164a8e3ca1db4f37e899663e81cc01e8"><div class="ttname"><a href="struct_context.html#a164a8e3ca1db4f37e899663e81cc01e8">Context::processes_table_head</a></div><div class="ttdeci">struct ListHead processes_table_head</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00080">context.h:84</a></div></div>
<div class="ttc" id="astruct_context_html_a20c7ffe57c7f6f73e03d3eb865bf130b"><div class="ttname"><a href="struct_context.html#a20c7ffe57c7f6f73e03d3eb865bf130b">Context::exit_reason</a></div><div class="ttdeci">term exit_reason</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00135">context.h:135</a></div></div>
<div class="ttc" id="astruct_context_html_a3e09aad8cd47f67a712d48266ac3c277"><div class="ttname"><a href="struct_context.html#a3e09aad8cd47f67a712d48266ac3c277">Context::has_max_heap_size</a></div><div class="ttdeci">unsigned int has_max_heap_size</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00115">context.h:115</a></div></div>
<div class="ttc" id="astruct_context_html_a46e035db0faacb8c62dc1dd4284778b4"><div class="ttname"><a href="struct_context.html#a46e035db0faacb8c62dc1dd4284778b4">Context::timer_list_head</a></div><div class="ttdeci">struct TimerListItem timer_list_head</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00085">context.h:87</a></div></div>
<div class="ttc" id="astruct_context_html_a4c60ad366f8f805cf5ecff919fd6cc31"><div class="ttname"><a href="struct_context.html#a4c60ad366f8f805cf5ecff919fd6cc31">Context::e</a></div><div class="ttdeci">term * e</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00079">context.h:79</a></div></div>
<div class="ttc" id="astruct_context_html_a5c62d2b89183efe97f521a54ae312ad6"><div class="ttname"><a href="struct_context.html#a5c62d2b89183efe97f521a54ae312ad6">Context::saved_module</a></div><div class="ttdeci">Module * saved_module</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00099">context.h:99</a></div></div>
<div class="ttc" id="astruct_context_html_a60423fe338828bff9a14ded5d34bb5b0"><div class="ttname"><a href="struct_context.html#a60423fe338828bff9a14ded5d34bb5b0">Context::monitors_head</a></div><div class="ttdeci">struct ListHead monitors_head</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00085">context.h:89</a></div></div>
<div class="ttc" id="astruct_context_html_a68e420dbb90bd601833abd8cbc063e03"><div class="ttname"><a href="struct_context.html#a68e420dbb90bd601833abd8cbc063e03">Context::bs_offset</a></div><div class="ttdeci">size_t bs_offset</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00133">context.h:133</a></div></div>
<div class="ttc" id="astruct_context_html_a7445d1fd6d7a816a8e4b4b118c476fda"><div class="ttname"><a href="struct_context.html#a7445d1fd6d7a816a8e4b4b118c476fda">Context::x</a></div><div class="ttdeci">term x[MAX_REG]</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00080">context.h:80</a></div></div>
<div class="ttc" id="astruct_context_html_a75e3c80303d13b257e1ea370cb95b1f4"><div class="ttname"><a href="struct_context.html#a75e3c80303d13b257e1ea370cb95b1f4">Context::dictionary</a></div><div class="ttdeci">struct ListHead dictionary</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00104">context.h:106</a></div></div>
<div class="ttc" id="astruct_context_html_a7d663b46991eb2b27ef2e2dcfae9323f"><div class="ttname"><a href="struct_context.html#a7d663b46991eb2b27ef2e2dcfae9323f">Context::platform_data</a></div><div class="ttdeci">void * platform_data</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00128">context.h:128</a></div></div>
<div class="ttc" id="astruct_context_html_a7fb0662185bce79f98568f9ffe787f62"><div class="ttname"><a href="struct_context.html#a7fb0662185bce79f98568f9ffe787f62">Context::saved_ip</a></div><div class="ttdeci">const void * saved_ip</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00100">context.h:100</a></div></div>
<div class="ttc" id="astruct_context_html_a8e815b8d319337382fc61f942fb46a59"><div class="ttname"><a href="struct_context.html#a8e815b8d319337382fc61f942fb46a59">Context::heap</a></div><div class="ttdeci">Heap heap</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00078">context.h:78</a></div></div>
<div class="ttc" id="astruct_context_html_a9182737457d76114944ac3f53842f38c"><div class="ttname"><a href="struct_context.html#a9182737457d76114944ac3f53842f38c">Context::max_heap_size</a></div><div class="ttdeci">size_t max_heap_size</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00094">context.h:94</a></div></div>
<div class="ttc" id="astruct_context_html_aa72fc5a718a54be78b4a02607b56ffc9"><div class="ttname"><a href="struct_context.html#aa72fc5a718a54be78b4a02607b56ffc9">Context::min_heap_size</a></div><div class="ttdeci">size_t min_heap_size</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00093">context.h:93</a></div></div>
<div class="ttc" id="astruct_context_html_aa77a5906553bf50e66cc182ec13e80e8"><div class="ttname"><a href="struct_context.html#aa77a5906553bf50e66cc182ec13e80e8">Context::native_handler</a></div><div class="ttdeci">native_handler_f native_handler</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00109">context.h:109</a></div></div>
<div class="ttc" id="astruct_context_html_aab748d6f6fa18955b7529a051c82b964"><div class="ttname"><a href="struct_context.html#aab748d6f6fa18955b7529a051c82b964">Context::flags</a></div><div class="ttdeci">enum ContextFlags ATOMIC flags</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00117">context.h:126</a></div></div>
<div class="ttc" id="astruct_context_html_ab94260ad13e4741d0fec0bdd9b9f247a"><div class="ttname"><a href="struct_context.html#ab94260ad13e4741d0fec0bdd9b9f247a">Context::fr</a></div><div class="ttdeci">avm_float_t * fr</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00091">context.h:91</a></div></div>
<div class="ttc" id="astruct_context_html_abd494edaadbc46a8bce8c137930e1c5f"><div class="ttname"><a href="struct_context.html#abd494edaadbc46a8bce8c137930e1c5f">Context::has_min_heap_size</a></div><div class="ttdeci">unsigned int has_min_heap_size</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00114">context.h:114</a></div></div>
<div class="ttc" id="astruct_context_html_ad77850973de5c0039da7cc4dcb00f130"><div class="ttname"><a href="struct_context.html#ad77850973de5c0039da7cc4dcb00f130">Context::leader</a></div><div class="ttdeci">unsigned int leader</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00113">context.h:113</a></div></div>
<div class="ttc" id="astruct_context_html_adc2407ac05fe0a57ef7a7eaeb60487fa"><div class="ttname"><a href="struct_context.html#adc2407ac05fe0a57ef7a7eaeb60487fa">Context::trap_exit</a></div><div class="ttdeci">bool trap_exit</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00117">context.h:117</a></div></div>
<div class="ttc" id="astruct_context_html_ae38e253564b54ff94879c3ce89bb20bc"><div class="ttname"><a href="struct_context.html#ae38e253564b54ff94879c3ce89bb20bc">Context::mailbox</a></div><div class="ttdeci">Mailbox mailbox</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00104">context.h:104</a></div></div>
<div class="ttc" id="astruct_context_html_ae42a6da3dbc6a8f0cfa9ec35312e32dc"><div class="ttname"><a href="struct_context.html#ae42a6da3dbc6a8f0cfa9ec35312e32dc">Context::process_id</a></div><div class="ttdeci">int32_t process_id</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00085">context.h:85</a></div></div>
<div class="ttc" id="astruct_context_html_ae9942a065674962c131829f2d6498794"><div class="ttname"><a href="struct_context.html#ae9942a065674962c131829f2d6498794">Context::restore_trap_handler</a></div><div class="ttdeci">void * restore_trap_handler</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00102">context.h:102</a></div></div>
<div class="ttc" id="astruct_context_html_aeae2e25a8e84534d0dba31f08797691a"><div class="ttname"><a href="struct_context.html#aeae2e25a8e84534d0dba31f08797691a">Context::cp</a></div><div class="ttdeci">unsigned long cp</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00096">context.h:96</a></div></div>
<div class="ttc" id="astruct_context_html_af1fdf13c2ec4006b6868c3ae722652c0"><div class="ttname"><a href="struct_context.html#af1fdf13c2ec4006b6868c3ae722652c0">Context::group_leader</a></div><div class="ttdeci">term group_leader</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00130">context.h:130</a></div></div>
<div class="ttc" id="astruct_erl_nif_env_html"><div class="ttname"><a href="struct_erl_nif_env.html">ErlNifEnv</a></div><div class="ttdef"><b>Definition:</b> <a href="erl__nif__priv_8h_source.html#l00031">erl_nif_priv.h:32</a></div></div>
<div class="ttc" id="astruct_global_context_html"><div class="ttname"><a href="struct_global_context.html">GlobalContext</a></div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8h_source.html#l00066">globalcontext.h:67</a></div></div>
<div class="ttc" id="astruct_global_context_html_abd1392115cdad4d5963f0b4f90e06eb4"><div class="ttname"><a href="struct_global_context.html#abd1392115cdad4d5963f0b4f90e06eb4">GlobalContext::processes_table</a></div><div class="ttdeci">struct SyncList processes_table</div><div class="ttdef"><b>Definition:</b> <a href="globalcontext_8h_source.html#l00074">globalcontext.h:77</a></div></div>
<div class="ttc" id="astruct_heap_html_a2cc7da3405d24ff958597a3f7f844057"><div class="ttname"><a href="struct_heap.html#a2cc7da3405d24ff958597a3f7f844057">Heap::heap_end</a></div><div class="ttdeci">term * heap_end</div><div class="ttdef"><b>Definition:</b> <a href="memory_8h_source.html#l00087">memory.h:87</a></div></div>
<div class="ttc" id="astruct_list_head_html"><div class="ttname"><a href="struct_list_head.html">ListHead</a></div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00044">list.h:45</a></div></div>
<div class="ttc" id="astruct_list_head_html_a2855fe0dde7716a90cd54fae55ceaa54"><div class="ttname"><a href="struct_list_head.html#a2855fe0dde7716a90cd54fae55ceaa54">ListHead::next</a></div><div class="ttdeci">struct ListHead * next</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00046">list.h:46</a></div></div>
<div class="ttc" id="astruct_monitor_html"><div class="ttname"><a href="struct_monitor.html">Monitor</a></div><div class="ttdoc">A regular monitor or a half link.</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00146">context.h:147</a></div></div>
<div class="ttc" id="astruct_monitor_html_a3a1498202e5af885a5f184d8e2638ef6"><div class="ttname"><a href="struct_monitor.html#a3a1498202e5af885a5f184d8e2638ef6">Monitor::monitor_obj</a></div><div class="ttdeci">term monitor_obj</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00150">context.h:150</a></div></div>
<div class="ttc" id="astruct_monitor_html_a64d0bef751da6178ab84e7b31f021386"><div class="ttname"><a href="struct_monitor.html#a64d0bef751da6178ab84e7b31f021386">Monitor::ref_ticks</a></div><div class="ttdeci">uint64_t ref_ticks</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00149">context.h:149</a></div></div>
<div class="ttc" id="astruct_monitor_html_acaa70c1ff6cf59869bdc1b68717acb11"><div class="ttname"><a href="struct_monitor.html#acaa70c1ff6cf59869bdc1b68717acb11">Monitor::monitor_list_head</a></div><div class="ttdeci">struct ListHead monitor_list_head</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00135">context.h:148</a></div></div>
<div class="ttc" id="astruct_refc_binary_html"><div class="ttname"><a href="struct_refc_binary.html">RefcBinary</a></div><div class="ttdef"><b>Definition:</b> <a href="refc__binary_8h_source.html#l00045">refc_binary.h:46</a></div></div>
<div class="ttc" id="astruct_refc_binary_html_aa1788b61a0f47228d8b8ddf355489db8"><div class="ttname"><a href="struct_refc_binary.html#aa1788b61a0f47228d8b8ddf355489db8">RefcBinary::resource_type</a></div><div class="ttdeci">struct ResourceType * resource_type</div><div class="ttdef"><b>Definition:</b> <a href="refc__binary_8h_source.html#l00050">refc_binary.h:50</a></div></div>
<div class="ttc" id="astruct_resource_monitor_html"><div class="ttname"><a href="struct_resource_monitor.html">ResourceMonitor</a></div><div class="ttdoc">A resource monitor.</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00156">context.h:157</a></div></div>
<div class="ttc" id="astruct_resource_monitor_html_a5725fd596cd89f1bc1bd201ce1b62fba"><div class="ttname"><a href="struct_resource_monitor.html#a5725fd596cd89f1bc1bd201ce1b62fba">ResourceMonitor::base</a></div><div class="ttdeci">struct Monitor base</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00150">context.h:158</a></div></div>
<div class="ttc" id="astruct_resource_monitor_html_a70629a5f19cf73148fe1d7ba12684564"><div class="ttname"><a href="struct_resource_monitor.html#a70629a5f19cf73148fe1d7ba12684564">ResourceMonitor::resource_list_head</a></div><div class="ttdeci">struct ListHead resource_list_head</div><div class="ttdef"><b>Definition:</b> <a href="context_8h_source.html#l00150">context.h:159</a></div></div>
<div class="ttc" id="astruct_resource_type_html_ad9945d4dc66584799b66523f5cd885ff"><div class="ttname"><a href="struct_resource_type.html#ad9945d4dc66584799b66523f5cd885ff">ResourceType::down</a></div><div class="ttdeci">ErlNifResourceDown * down</div><div class="ttdef"><b>Definition:</b> <a href="resources_8h_source.html#l00056">resources.h:56</a></div></div>
<div class="ttc" id="astruct_term_signal_html"><div class="ttname"><a href="struct_term_signal.html">TermSignal</a></div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00092">mailbox.h:93</a></div></div>
<div class="ttc" id="astruct_term_signal_html_ac32e472e073b1826c38259a0c0671c6b"><div class="ttname"><a href="struct_term_signal.html#ac32e472e073b1826c38259a0c0671c6b">TermSignal::signal_term</a></div><div class="ttdeci">term signal_term</div><div class="ttdef"><b>Definition:</b> <a href="mailbox_8h_source.html#l00096">mailbox.h:96</a></div></div>
<div class="ttc" id="astruct_timer_list_item_html_a7b6e853babe0200ef998ba5d85c24b8b"><div class="ttname"><a href="struct_timer_list_item.html#a7b6e853babe0200ef998ba5d85c24b8b">TimerListItem::head</a></div><div class="ttdeci">struct ListHead head</div><div class="ttdef"><b>Definition:</b> <a href="timer__list_8h_source.html#l00045">timer_list.h:46</a></div></div>
<div class="ttc" id="asynclist_8h_html"><div class="ttname"><a href="synclist_8h.html">synclist.h</a></div></div>
<div class="ttc" id="asys_8h_html"><div class="ttname"><a href="sys_8h.html">sys.h</a></div><div class="ttdoc">Platform specific functions.</div></div>
<div class="ttc" id="aterm_8h_html_a476d7e8af59a33c4b1a710660e8edd61"><div class="ttname"><a href="term_8h.html#a476d7e8af59a33c4b1a710660e8edd61">TUPLE_SIZE</a></div><div class="ttdeci">#define TUPLE_SIZE(elems)</div><div class="ttdef"><b>Definition:</b> <a href="term_8h_source.html#l00087">term.h:87</a></div></div>
<div class="ttc" id="aterm_8h_html_acce951942a16553f750379e8ff77b6a8"><div class="ttname"><a href="term_8h.html#acce951942a16553f750379e8ff77b6a8">TERM_BOXED_VALUE_TAG</a></div><div class="ttdeci">#define TERM_BOXED_VALUE_TAG</div><div class="ttdef"><b>Definition:</b> <a href="term_8h_source.html#l00047">term.h:47</a></div></div>
<div class="ttc" id="aterm_8h_html_afd9d34c95799384d99b83b115f172f96"><div class="ttname"><a href="term_8h.html#afd9d34c95799384d99b83b115f172f96">REF_SIZE</a></div><div class="ttdeci">#define REF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="term_8h_source.html#l00086">term.h:86</a></div></div>
<div class="ttc" id="aterm__typedef_8h_html_a603769ce1e8eeb1faa458d7e6cf904d8"><div class="ttname"><a href="term__typedef_8h.html#a603769ce1e8eeb1faa458d7e6cf904d8">term</a></div><div class="ttdeci">uintptr_t term</div><div class="ttdef"><b>Definition:</b> <a href="term__typedef_8h_source.html#l00042">term_typedef.h:42</a></div></div>
<div class="ttc" id="autils_8h_html_a48e118cd23f648768f0faf4a32d303e6"><div class="ttname"><a href="utils_8h.html#a48e118cd23f648768f0faf4a32d303e6">AVM_ABORT</a></div><div class="ttdeci">#define AVM_ABORT()</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00187">utils.h:187</a></div></div>
<div class="ttc" id="autils_8h_html_a738ec595994440a8d082ecd8bd67c53b"><div class="ttname"><a href="utils_8h.html#a738ec595994440a8d082ecd8bd67c53b">IS_NULL_PTR</a></div><div class="ttdeci">#define IS_NULL_PTR(x)</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00132">utils.h:132</a></div></div>
<div class="ttc" id="autils_8h_html_a86d500a34c624c2cae56bc25a31b12f3"><div class="ttname"><a href="utils_8h.html#a86d500a34c624c2cae56bc25a31b12f3">UNUSED</a></div><div class="ttdeci">#define UNUSED(x)</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00124">utils.h:124</a></div></div>
<div class="ttc" id="autils_8h_html_ab10d0a221f4d7a706701b806c8135fd7"><div class="ttname"><a href="utils_8h.html#ab10d0a221f4d7a706701b806c8135fd7">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)</div><div class="ttdef"><b>Definition:</b> <a href="utils_8h_source.html#l00134">utils.h:134</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
